基于example6,实现对多种消息的支持
通过改造消息格式，以一个enum类型表示消息类型，同时使用oneof类型来构造具体的消息实体